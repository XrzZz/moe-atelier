@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Varela+Round&family=Nunito:wght@400;600;700;800&display=swap');

:root {
  /* 萌系糖果配色板 3.0 */
  --c-bg: #FFF9FA; /* 极淡的粉白背景 */
  --c-bg-card: #FFFFFF;
  --c-bg-input: #FFFFFF; /* 改为纯白 */
  
  /* 主色调 - 樱花粉 */
  --c-primary: #FF9EB5; 
  --c-primary-hover: #FF85A1;
  --c-primary-active: #FF7090;
  --c-primary-light: #FFF0F3;
  
  /* 辅助色 */
  --c-success: #A7E8BD; /* 马卡龙绿 */
  --c-success-dark: #6BCB8A;
  --c-warning: #FFE5A0; /* 奶油黄 */
  --c-warning-dark: #FFC857;
  --c-error: #FFB3C1; /* 柔和红 */
  --c-error-dark: #FF8FA3;
  --c-info: #A0E1E8; /* 婴儿蓝 */
  
  /* 文字颜色 - 暖灰色 */
  --c-text-main: #665555;
  --c-text-light: #998888;
  --c-text-white: #FFFFFF;

  /* 布局变量 */
  --radius-sm: 12px;
  --radius-md: 20px;
  --radius-lg: 32px;
  --radius-xl: 40px;
  --circle-btn-size: 40px;
  
  /* 柔和阴影 */
  --shadow-xs: 0 2px 8px rgba(255, 158, 181, 0.1);
  --shadow-sm: 0 4px 12px rgba(255, 158, 181, 0.15);
  --shadow-md: 0 8px 24px rgba(255, 158, 181, 0.12);
  --shadow-lg: 0 16px 40px rgba(255, 158, 181, 0.15);
  --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.02);
  
  /* 字体 */
  --font-stack: 'Nunito', 'Quicksand', 'Varela Round', system-ui, -apple-system, sans-serif;

  /* 圆形点阵背景 */
  --moe-dot-bg-image:
    radial-gradient(var(--c-primary-light) 20%, transparent 20%),
    radial-gradient(var(--c-primary-light) 20%, transparent 20%);
  --moe-dot-bg-size: 40px 40px;
  --moe-dot-bg-position: 0 0, 20px 20px;
}

html {
  background-color: var(--c-bg);
  background-image: var(--moe-dot-bg-image);
  background-size: var(--moe-dot-bg-size);
  background-position: var(--moe-dot-bg-position);
}

body {
  margin: 0;
  padding: 0;
  background-color: var(--c-bg);
  color: var(--c-text-main);
  font-family: var(--font-stack);
  -webkit-font-smoothing: antialiased;
  /* 可爱的波点背景 */
  background-image: var(--moe-dot-bg-image);
  background-size: var(--moe-dot-bg-size);
  background-position: var(--moe-dot-bg-position);
  overflow-x: hidden;
}

/* 滚动条美化 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: transparent; 
}
::-webkit-scrollbar-thumb {
  background: #FFD1DC; 
  border-radius: 10px;
  border: 2px solid var(--c-bg);
}
::-webkit-scrollbar-thumb:hover {
  background: var(--c-primary); 
}

/* 动画类 */
.fade-in-up {
  animation: fadeInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  opacity: 0;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* 平滑展开/收起动画 - 使用 Grid 技巧 */
.password-collapse-container {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), margin-top 0.3s ease;
  overflow: hidden;
  margin-top: 0;
}

.password-collapse-container.open {
  grid-template-rows: 1fr;
  margin-top: 16px;
}

.password-content-wrapper {
  overflow: hidden;
  min-height: 0;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px dashed #FF9EB5;
  padding: 0 12px;
  opacity: 0;
  transition: opacity 0.3s ease, padding 0.3s ease;
}

.password-collapse-container.open .password-content-wrapper {
  opacity: 1;
  padding: 12px;
}

.hover-scale {
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.hover-scale:hover {
  transform: scale(1.02);
}

/* 拖动时的浮起动画 */
@keyframes pop {
  0% { transform: scale(1); box-shadow: var(--shadow-sm); }
  100% { transform: scale(1.02); box-shadow: var(--shadow-lg); }
}

.drag-overlay-item {
  animation: pop 0.2s cubic-bezier(0.18, 0.67, 0.6, 1.22) forwards;
  cursor: grabbing;
}

/* 通用卡片样式 */
.moe-card {
  background: var(--c-bg-card);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  border: 2px solid #FFF;
  transition: all 0.3s ease;
  overflow: hidden;
}

.moe-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

/* 统计面板样式优化 */
.stat-panel {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  border-radius: var(--radius-md);
  padding: 20px;
  box-shadow: var(--shadow-sm);
  border: 1px solid rgba(255, 255, 255, 0.6);
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px;
  border-radius: var(--radius-sm);
  transition: all 0.3s ease;
  background: transparent;
}

.stat-item:hover {
  background: var(--c-bg);
}

.stat-value {
  font-size: 24px;
  font-weight: 800;
  color: var(--c-text-main);
  line-height: 1.2;
  font-family: 'Nunito', sans-serif;
}

.stat-label {
  font-size: 12px;
  color: var(--c-text-light);
  font-weight: 600;
  margin-top: 4px;
}

/* Ant Design 深度定制 */
.ant-btn {
  border-radius: var(--radius-lg) !important;
  font-weight: 700 !important;
  border: none !important;
  box-shadow: none !important;
  height: auto !important;
  padding: 8px 20px !important;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}

.circle-icon-btn.ant-btn {
  width: var(--circle-btn-size) !important;
  height: var(--circle-btn-size) !important;
  min-width: var(--circle-btn-size) !important;
  padding: 0 !important;
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  border-radius: 50% !important;
}

.ant-btn-primary {
  background: var(--c-primary) !important;
  color: white !important;
  box-shadow: 0 4px 12px rgba(255, 158, 181, 0.4) !important;
}

.ant-btn-primary:hover {
  background: var(--c-primary-hover) !important;
  transform: translateY(-2px) scale(1.02) !important;
  box-shadow: 0 6px 16px rgba(255, 158, 181, 0.5) !important;
}

.ant-btn-default {
  background: #fff !important;
  color: var(--c-text-main) !important;
  border: 2px solid #F0F0F0 !important;
}

.ant-btn-default:hover {
  border-color: var(--c-primary) !important;
  color: var(--c-primary) !important;
}

.ant-input, .ant-input-textarea, .ant-input-number-input {
  border-radius: var(--radius-sm) !important;
  background-color: var(--c-bg-input) !important;
  border: 2px solid #F0F0F0 !important; /* 添加淡边框 */
  color: var(--c-text-main) !important;
  font-weight: 600;
  padding: 10px 16px !important;
}

/* 修复带前缀/后缀输入框的双层边框问题 */
.ant-input-affix-wrapper {
  border-radius: var(--radius-sm) !important;
  background-color: var(--c-bg-input) !important;
  border: 2px solid #F0F0F0 !important;
  padding: 8px 11px !important;
}

.ant-input-affix-wrapper:hover, .ant-input-affix-wrapper:focus, .ant-input-affix-wrapper-focused {
  border-color: var(--c-primary) !important;
  box-shadow: 0 0 0 4px var(--c-primary-light) !important;
}

/* 当 input 在 wrapper 内部时，移除其边框和背景 */
.ant-input-affix-wrapper .ant-input {
  border: none !important;
  background: transparent !important;
  padding: 0 0 0 8px !important; /* 增加左侧内边距，让光标不紧贴图标 */
  margin: 0 !important;
  color: var(--c-text-main) !important; /* 确保文字颜色正确 */
}

.ant-input:focus, .ant-input-textarea:focus {
  background-color: #fff !important;
  border-color: var(--c-primary) !important;
  box-shadow: 0 0 0 4px var(--c-primary-light) !important;
}

.ant-input-affix-wrapper .ant-input:focus {
  box-shadow: none !important;
}

.ant-input::placeholder {
  color: #D0C0C0;
}

/* Collection drawer handle integration */
.collection-drawer .ant-drawer-content-wrapper {
  overflow: visible;
  display: block !important;
}

.collection-drawer .ant-drawer-content-wrapper-hidden {
  display: block !important;
  transform: translateX(100%) !important;
  opacity: 1 !important;
  visibility: visible !important;
}

.collection-drawer .ant-drawer-content-wrapper-hidden .collection-drawer-panel {
  display: none;
}

.collection-drawer.collection-drawer-unopened .ant-drawer-content-wrapper {
  transform: translateX(100%);
}

.collection-drawer.collection-drawer-unopened .collection-drawer-panel {
  display: none;
}

.collection-drawer-shell {
  position: relative;
  height: 100%;
}

.collection-drawer-panel {
  height: 100%;
}

.collection-drawer-handle {
  position: absolute;
  left: -20px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 2;
  cursor: pointer;
  pointer-events: auto;
  filter: drop-shadow(-2px 2px 4px rgba(0, 0, 0, 0.1));
  clip-path: inset(-20px 0px -20px -20px);
}

.collection-drawer-handle-icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-30%, -50%);
  color: #665555;
}

/* Header 响应式优化 */
.app-header {
  padding: 0 24px !important;
}

.header-actions .ant-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1 !important;
}

.header-actions .ant-btn:not(.circle-icon-btn) {
  height: 40px !important;
  padding: 0 20px !important;
}

.header-actions .ant-btn:not(.circle-icon-btn) > span {
  display: inline-flex;
  align-items: center;
}

.header-actions .ant-btn .anticon {
  line-height: 0;
}

/* 移动端适配优化 */
@media (max-width: 768px) {
  .app-header {
    padding: 0 12px !important; /* 减小内边距腾出空间 */
  }
  
  .header-actions {
    gap: 8px !important; /* 在移动端稍微减小按钮间距 */
  }

  .header-actions > .ant-space-item:nth-child(1),
  .header-actions > .ant-space-item:nth-child(3) {
    display: none;
  }

  .stat-panel {
    padding: 12px;
  }
  
  .stat-value {
    font-size: 20px;
  }
  
  .ant-drawer-content-wrapper {
    width: 100% !important;
  }
  
  .mobile-hidden {
    display: none !important;
  }

  .desktop-hidden {
    display: inline-flex !important;
  }
  
  .mobile-compact-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
}

@media (min-width: 769px) {
  .desktop-hidden,
  .desktop-hidden.circle-icon-btn,
  .desktop-hidden.circle-icon-btn.ant-btn {
    display: none !important;
  }
}

/* 修复模型列表刷新按钮样式 */
.model-refresh-btn.ant-btn,
.prompt-refresh-btn.ant-btn {
  width: 40px !important;
  height: 40px !important;
  padding: 0 !important;
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
}

/* 移动端提示词广场图标按钮强制居中 */
.mobile-icon-btn.ant-btn {
  line-height: 0 !important;
}

.mobile-icon-btn.ant-btn .ant-btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 0;
}

.mobile-icon-btn.ant-btn .ant-btn-icon > * {
  display: block;
}

/* Keep AutoComplete height driven by the custom Input */
.model-autocomplete.ant-select-single {
  height: auto;
}

.model-autocomplete.ant-select-single .ant-select-selector {
  height: auto;
  align-items: center;
}

/* Collection Box 卡片样式 */
.collection-card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.collection-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(255, 143, 171, 0.25) !important;
}

/* Collection Box 自定义滚动条 */
.collection-drawer .ant-drawer-body::-webkit-scrollbar {
  width: 6px;
}

.collection-drawer .ant-drawer-body::-webkit-scrollbar-track {
  background: transparent;
}

.collection-drawer .ant-drawer-body::-webkit-scrollbar-thumb {
  background: #FFC2D1;
  border-radius: 3px;
}

.collection-drawer .ant-drawer-body::-webkit-scrollbar-thumb:hover {
  background: #FF8FAB;
}
